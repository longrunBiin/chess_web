<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>체스 게임</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Vue.js CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Axios CDN -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <div id="app">
        <h1>체스 게임</h1>
        <!-- 알림 메시지 -->
        <div v-if="notification.show" class="notification" :class="notification.type">
            {{ notification.message }}
        </div>
        <!-- 시작 화면 -->
        <div v-if="!gameStarted && !showResult" class="start-screen">
            <button @click="startGame" class="start-button">게임 시작</button>
        </div>
        <!-- 체스판 -->
        <div v-if="gameStarted" class="chess-board-container">
            <div class="board-with-coordinates">
                <!-- 왼쪽 행 좌표 -->
                <div class="coordinate-column">
                    <div v-for="row in '87654321'" class="coordinate-label">{{row}}</div>
                </div>
                
                <!-- 체스판 -->
                <div class="chess-board">
                    <div v-for="(row, rowIndex) in board" :key="rowIndex" class="row">
                        <div v-for="(piece, colIndex) in row" 
                             :key="colIndex" 
                             class="cell"
                             :class="{ 
                                 'black-cell': isBlackCell(rowIndex, colIndex),
                                 'selected': isSelected(rowIndex, colIndex)
                             }"
                             @click="handleCellClick(rowIndex, colIndex)">
                            {{ piece === '.' ? '' : piece }}
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 하단 열 좌표 -->
            <div class="coordinate-row">
                <div class="coordinate-cell"></div>
                <div v-for="col in 'abcdefgh'" class="coordinate-label">{{col}}</div>
                <div class="coordinate-cell"></div>
            </div>
        </div>
        <!-- 게임 결과 화면 -->
        <div v-if="showResult" class="game-result">
            <h2>게임 종료!</h2>
            <h3>승자: {{ gameResult.winnerColor === 'WHITE' ? '백색' : '흑색' }}</h3>
            
            <div class="result-details">
                <div class="team-result">
                    <h4>백색 팀</h4>
                    <p>점수: {{ (gameResult.winnerColor === 'WHITE' ? gameResult.winnerPieces : gameResult.loserPieces).reduce((sum, piece) => sum + piece.score, 0) }}</p>
                    <div class="pieces-list">
                        <div v-for="piece in gameResult.winnerColor === 'WHITE' ? gameResult.winnerPieces : gameResult.loserPieces" 
                             :key="piece.name + piece.score" 
                             class="piece">
                            {{ piece.name }} ({{ piece.score }})
                        </div>
                    </div>
                </div>
                
                <div class="team-result">
                    <h4>흑색 팀</h4>
                    <p>점수: {{ (gameResult.winnerColor === 'BLACK' ? gameResult.winnerPieces : gameResult.loserPieces).reduce((sum, piece) => sum + piece.score, 0) }}</p>
                    <div class="pieces-list">
                        <div v-for="piece in gameResult.winnerColor === 'BLACK' ? gameResult.winnerPieces : gameResult.loserPieces" 
                             :key="piece.name + piece.score" 
                             class="piece">
                            {{ piece.name }} ({{ piece.score }})
                        </div>
                    </div>
                </div>
            </div>
            
            <button @click="startGame" class="restart-button">다시하기</button>
        </div>
    </div>
    <script src="js/app.js"></script>
</body>
</html>
